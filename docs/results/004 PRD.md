# Product Requirements Document (PRD) - StrummerBox

## 1. Product Overview
StrummerBox to aplikacja internetowa zaprojektowana dla gitarzystów-amatorów i organizatorów spotkań towarzyskich. Jej głównym celem jest zastąpienie niewygodnych, papierowych śpiewników prostym i elastycznym narzędziem cyfrowym. Aplikacja umożliwia tworzenie prywatnej biblioteki piosenek z akordami, układanie z nich repertuarów na konkretne okazje oraz błyskawiczne udostępnianie ich uczestnikom wydarzenia za pomocą kodów QR i linków. StrummerBox oferuje dwa główne interfejsy: rozbudowany tryb zarządzania dla przygotowującego (organizatora) oraz uproszczony, czytelny widok z tekstami dla śpiewających (biesiadników), zoptymalizowany pod kątem urządzeń mobilnych.

## 2. User Problem
Podczas spotkań towarzyskich, takich jak ogniska czy domówki, gitarzyści często borykają się z problemem logistycznym udostępniania tekstów piosenek wszystkim uczestnikom. Drukowanie śpiewników jest niepraktyczne, nieekologiczne i mało elastyczne – repertuar jest sztywny, a kartki łatwo pomylić lub zniszczyć. Brakuje centralnego miejsca, w którym organizator mógłby z wyprzedzeniem przygotować setlistę, a następnie w trakcie imprezy natychmiastowo i bezproblemowo udostępnić ją reszcie grupy, zachowując dla siebie wersję z akordami.

## 3. Functional Requirements

### 3.1. Użytkownicy i Dostęp
-   FR-001: Aplikacja rozróżnia dwa typy użytkowników: 'Organizator' (zarejestrowany i zalogowany) oraz 'Biesiadnik' (użytkownik anonimowy, niezalogowany).
-   FR-002: Rejestracja i logowanie dla Organizatora odbywa się za pomocą adresu e-mail i hasła.
-   FR-002a: Aktywacja nowo założonego konta Organizatora wymaga potwierdzenia adresu e-mail poprzez kliknięcie w unikalny link weryfikacyjny wysłany na podany adres.
-   FR-003: Dostęp do funkcji zarządzania (tworzenie, edycja, usuwanie treści) jest ograniczony wyłącznie do zalogowanych Organizatorów z aktywnym kontem.

### 3.2. Tryby Pracy Aplikacji
-   FR-004: Tryb 'Zarządzanie': Dostępny dla Organizatora po zalogowaniu, zoptymalizowany dla komputerów stacjonarnych, ale responsywny. Umożliwia pełne zarządzanie piosenkami i repertuarami.
-   FR-005: Tryb 'Biesiada': Uproszczony widok przeznaczony do użytku podczas wydarzenia, zoptymalizowany dla urządzeń mobilnych. Dostępny zarówno dla Organizatora (z akordami), jak i Biesiadników (sam tekst).

### 3.3. Zarządzanie Piosenkami (CRUD)
-   FR-006: Organizator może dodawać, przeglądać, edytować i usuwać piosenki w swojej prywatnej bibliotece.
-   FR-007: Nazwy piosenek muszą być unikalne w obrębie konta jednego Organizatora.
-   FR-008: Edytor piosenek domyślnie przyjmuje tekst w formacie "akordy nad tekstem".
-   FR-009: Edytor piosenek posiada interfejs "side-by-side" z podglądem na żywo renderowanego tekstu w formacie ChordPro, który będzie zapisany w bazie danych.
-   FR-010: Edytor posiada walidację sprawdzającą poprawność konwersji do formatu ChordPro (np. czy wszystkie nawiasy kwadratowe są poprawnie zamknięte w wygenerowanym podglądzie).
-   FR-010a: Organizator może otworzyć podgląd piosenki bezpośrednio z listy piosenek, aby zobaczyć jej wersję "do grania" wraz z interaktywną transpozycją.

### 3.4. Zarządzanie Repertuarami (CRUD)
-   FR-011: Organizator może tworzyć, przeglądać, edytować i usuwać repertuary.
-   FR-012: Nazwy repertuarów muszą być unikalne w obrębie konta jednego Organizatora.
-   FR-013: Tworzenie repertuaru polega na wyborze piosenek z istniejącej biblioteki Organizatora.
-   FR-014: Organizator może zmieniać kolejność piosenek w repertuarze za pomocą przycisków "w górę / w dół".

### 3.5. Udostępnianie i Widok Publiczny
-   FR-015: Dla każdej piosenki i każdego repertuaru generowany jest stały, publiczny link oraz odpowiadający mu kod QR.
-   FR-016: Dostęp do linku publicznego nie wymaga logowania.
-   FR-017: Strony publiczne nie są indeksowane przez wyszukiwarki (za pomocą odpowiednich metatagów).
-   FR-018: Biesiadnik, otwierając link do repertuaru, widzi listę piosenek.
-   FR-019: Biesiadnik, otwierając link do piosenki, widzi domyślnie wyłącznie jej tekst, bez akordów, wyświetlony dużą, czytelną czcionką.
-   FR-020: Biesiadnik w widoku piosenki (w ramach repertuaru) ma możliwość nawigacji do następnego i poprzedniego utworu.
-   FR-020a: Biesiadnik w widoku piosenki ma możliwość włączenia lub wyłączenia widoczności akordów za pomocą dedykowanego przełącznika.

### 3.6. Interfejs i Doświadczenie Użytkownika (UX)
-   FR-021: Organizator w trybie 'Biesiada' widzi piosenki z akordami i ma możliwość wyświetlenia dużego kodu QR w celu udostępnienia.
-   FR-022: Akcje destrukcyjne (usuwanie piosenki, usuwanie repertuaru) wymagają dodatkowego potwierdzenia od użytkownika.
-   FR-023: Aplikacja wyświetla przyjazne komunikaty "pustych stanów" (np. gdy nie ma jeszcze żadnych piosenek).
-   FR-024: Próba dostępu do usuniętej treści przekierowuje na dedykowaną stronę błędu.
-   FR-025: Aplikacja umożliwia transpozycję akordów w czasie rzeczywistym w widoku piosenki.
-   FR-025a: W widoku publicznym (Biesiadnik), kontrolki transpozycji są widoczne tylko po włączeniu widoczności akordów.
-   FR-025b: W widoku Biesiada (Organizator), kontrolki transpozycji są widoczne domyślnie.
-   FR-025c: Zmiana transpozycji jest stanem tymczasowym, po stronie klienta i nie modyfikuje trwale piosenki.
-   FR-026: Edytor piosenek umożliwia przełączanie widoku podglądu pomiędzy surowym formatem ChordPro a renderowanym widokiem "akordy nad tekstem" (analogicznym do trybu Biesiada).
-   FR-029: Edytor piosenek obsługuje uproszczoną składnię do oznaczania powtórzeń dla linii zawierających akordy i/lub tekst (np. `x2`), automatycznie konwertując ją do formatu ChordPro `{c: x2}`.
-   FR-030: Aplikacja umożliwia dynamiczną zmianę wielkości czcionki tekstu piosenki w widoku "Biesiada" oraz w widoku publicznym. Dostępne są trzy predefiniowane rozmiary: mały (1rem, domyślny), średni (1.3rem) i duży (1.6rem). Wybór użytkownika jest zapamiętywany w `localStorage` na danym urządzeniu.
-   FR-031: Aplikacja umożliwia Organizatorowi w trybie 'Biesiada' szybki powrót do panelu zarządzania (Dashboardu) z każdego widoku (lista repertuarów, lista piosenek, widok piosenki) za pomocą dedykowanego przycisku "Zamknij".

## 4. Product Boundaries

### 4.1. Wymagania wchodzące w zakres MVP
-   Pełna funkcjonalność rejestracji i logowania dla Organizatorów.
-   Kompletne operacje CRUD dla piosenek i repertuarów.
-   Implementacja edytora ChordPro z podglądem na żywo.
-   Generowanie i obsługa stałych linków publicznych i kodów QR.
-   Dwa oddzielne tryby pracy: 'Zarządzanie' i 'Biesiada'.
-   Widoki zoptymalizowane dla urządzeń mobilnych dla Biesiadników.
-   Mechanizm odzyskiwania dostępu do konta.
-   Transpozycja akordów w czasie rzeczywistym po stronie klienta.

### 4.2. Wymagania niewchodzące w zakres MVP
-   Skanowanie i OCR: Możliwość dodawania piosenek poprzez skanowanie fizycznych śpiewników.
-   Odnośniki do materiałów referencyjnych: Możliwość dodawania linków (np. do nagrań na YouTube) do piosenek.
-   Biblioteka publiczna: Brak możliwości przeglądania piosenek innych użytkowników.

## 5. User Stories

### 5.1. Uwierzytelnianie i Zarządzanie Kontem
-   ID: US-001
-   Title: Rejestracja nowego Organizatora
-   Description: Jako nowy użytkownik, chcę móc założyć konto w aplikacji przy użyciu mojego adresu e-mail i hasła, aby uzyskać dostęp do funkcji zarządzania piosenkami i repertuarami.
-   Acceptance Criteria:
    -   Formularz logownanie jest rozszerzony o przycisk "Zarejestruj" sie, który prrzekierowuje użytkownika do formularza rejestracji
    -   Formularz rejestracji zawiera pola na adres e-mail, nick i hasło.
    -   System waliduje, czy podany e-mail jest w poprawnym formacie.
    -   System sprawdza, czy e-mail nie jest już zarejestrowany.
    -   Po pomyślnym wypełnieniu formularza, na mój adres e-mail wysyłana jest wiadomość z linkiem aktywacyjnym.
    -   Jestem przekierowywany na stronę informującą o konieczności sprawdzenia skrzynki e-mail w celu dokończenia rejestracji.
    -   Próba logowania przed aktywacją konta skutkuje wyświetleniem odpowiedniego komunikatu z możliwością ponownego wysłania linku.

-   ID: US-002
-   Title: Logowanie Organizatora
-   Description: Jako zarejestrowany Organizator, chcę móc zalogować się na moje konto, aby uzyskać dostęp do moich piosenek i repertuarów.
-   Acceptance Criteria:
    -   Formularz logowania zawiera pola na adres e-mail i hasło.
    -   Po podaniu poprawnych danych jestem zalogowany i przekierowany do panelu zarządzania.
    -   W przypadku podania błędnych danych, wyświetlany jest stosowny komunikat.
    -   W przypadku próby logowania na konto, które nie zostało aktywowane przez e-mail, wyświetlany jest komunikat o konieczności aktywacji konta.

-   ID: US-003
-   Title: Dostęp do chronionych zasobów
-   Description: Jako użytkownik, chcę mieć pewność, że tylko zalogowani Organizatorzy mogą uzyskać dostęp do panelu zarządzania.
-   Acceptance Criteria:
    -   Próba wejścia na adres URL panelu zarządzania przez niezalogowanego użytkownika skutkuje przekierowaniem na stronę logowania.
    -   Tylko zalogowany użytkownik może wykonywać operacje tworzenia, edycji i usuwania.

-   ID: US-020
-   Title: Odzyskiwanie dostępu do konta
-   Description: Jako zarejestrowany Organizator, który zapomniał hasła, chcę móc zainicjować proces jego resetowania, aby odzyskać dostęp do mojego konta.
-   Acceptance Criteria:
    -   Na stronie logowania znajduje się link "Nie pamiętasz hasła?".
    -   Po kliknięciu linku przechodzę do formularza, gdzie mogę wpisać swój adres e-mail.
    -   Po podaniu poprawnego i istniejącego w systemie adresu e-mail, otrzymuję na niego wiadomość z unikalnym linkiem do zresetowania hasła.
    -   Link przenosi mnie na stronę, gdzie mogę ustawić nowe hasło.
    -   Po pomyślnej zmianie hasła mogę zalogować się przy użyciu nowych danych.

### 5.2. Zarządzanie Piosenkami
-   ID: US-004
-   Title: Tworzenie i edycja piosenki z intuicyjnym edytorem
-   Description: Jako Organizator, chcę móc dodawać i edytować piosenki w mojej bazie, wpisując tekst w naturalnym formacie "akordy nad tekstem" i jednocześnie widzieć podgląd, jak zostanie on zapisany w formacie ChordPro.
-   Acceptance Criteria:
    -   Formularz dodawania/edycji piosenki zawiera pole na tytuł oraz duży edytor tekstu.
    -   Do edytora wprowadzam tekst piosenki w formacie, gdzie linia z akordami znajduje się bezpośrednio nad linią z tekstem.
    -   Obok edytora (w widoku "side-by-side") wyświetlany jest podgląd piosenki w czasie rzeczywistym, pokazujący skonwertowaną treść w formacie ChordPro (np. `[G]Idę sobie [D]ulicą...`).
    -   System nie pozwala na zapisanie piosenki bez tytułu.
    -   System nie pozwala na zapisanie piosenki o tytule, który już istnieje w mojej bazie.
    -   Podczas edycji istniejącej piosenki, jej zawartość (zapisana w ChordPro) jest automatycznie konwertowana do formatu "akordy nad tekstem" i umieszczana w edytorze.
    -   Po zapisaniu, piosenka jest widoczna na liście moich piosenek.

-   ID: US-005
-   Title: Przeglądanie listy piosenek
-   Description: Jako Organizator, chcę widzieć listę wszystkich moich piosenek, aby móc nimi zarządzać.
-   Acceptance Criteria:
    -   W panelu zarządzania znajduje się sekcja z listą wszystkich dodanych przeze mnie piosenek.
    -   Dla każdej piosenki na liście widoczne są opcje edycji i usunięcia.
    -   Dla każdej piosenki na liście dostępna jest opcja zmiany statusu z 'szkic' na 'opublikowana' i odwrotnie.
    -   Jeśli nie dodałem żadnej piosenki, widzę komunikat "pustego stanu" z zachętą do działania.

-   ID: US-006
-   Title: Edycja istniejącej piosenki
-   Description: Jako Organizator, chcę móc edytować tytuł i treść wcześniej dodanej piosenki.
-   Acceptance Criteria:
    -   Po kliknięciu opcji "edytuj" przy piosence, przechodzę do formularza edycji.
    -   Formularz jest wypełniony aktualnymi danymi piosenki.
    -   Mogę zmienić tytuł i treść, a następnie zapisać zmiany.
    -   Zaktualizowana piosenka jest widoczna na liście.

-   ID: US-007
-   Title: Usuwanie piosenki
-   Description: Jako Organizator, chcę móc usunąć piosenkę z mojej bazy.
-   Acceptance Criteria:
    -   Po kliknięciu opcji "usuń", system prosi o potwierdzenie tej akcji.
    -   Jeśli piosenka jest częścią jakiegokolwiek repertuaru, komunikat potwierdzający zawiera dodatkowe ostrzeżenie.
    -   Po potwierdzeniu, piosenka znika z mojej listy piosenek i ze wszystkich repertuarów, w których była.

-   ID: US-022
-   Title: Potwierdzenie adresu e-mail w celu aktywacji konta
-   Description: Jako nowy Organizator, po otrzymaniu e-maila aktywacyjnego, chcę móc kliknąć w zawarty w nim link, aby pomyślnie aktywować moje konto i uzyskać możliwość logowania się do aplikacji.
-   Acceptance Criteria:
    -   Link aktywacyjny otrzymany w wiadomości e-mail jest unikalny.
    -   Kliknięcie w link przenosi mnie na dedykowaną stronę w aplikacji, która potwierdza status weryfikacji.
    -   Po pomyślnej weryfikacji, strona wyświetla komunikat o sukcesie i przycisk przekierowujący do strony logowania.
    -   Po aktywacji konta mogę się bez problemu zalogować na swoje dane.
    -   W przypadku, gdy link jest nieprawidłowy lub wygasł, strona wyświetla stosowny komunikat o błędzie oraz oferuje możliwość ponownego wysłania e-maila aktywacyjnego.

-   ID: US-023
-   Title: Ponowne wysłanie e-maila aktywacyjnego
-   Description: Jako nowy Organizator, który nie otrzymał e-maila aktywacyjnego lub którego link wygasł, chcę mieć możliwość ponownego wysłania wiadomości z linkiem, aby dokończyć proces rejestracji.
-   Acceptance Criteria:
    -   Na stronie logowania, a także na stronie błędu po kliknięciu w nieważny link, znajduje się opcja "Wyślij e-mail aktywacyjny ponownie".
    -   Po jej wybraniu, mogę wpisać swój adres e-mail w formularzu.
    -   System weryfikuje, czy e-mail istnieje w bazie i czy konto wciąż jest nieaktywne.
    -   Jeśli warunki są spełnione, na podany adres e-mail wysyłana jest nowa wiadomość z nowym, unikalnym linkiem aktywacyjnym.

-   ID: US-024
-   Title: Włączenie widoku akordów przez Biesiadnika
-   Description: Jako Biesiadnik, który również gra na gitarze, przeglądając tekst piosenki w widoku publicznym, chcę mieć możliwość włączenia widoku akordów, aby móc zagrać utwór razem z innymi.
-   Acceptance Criteria:
    -   W publicznym widoku piosenki, w widocznym miejscu (np. w prawym górnym rogu) znajduje się przełącznik "Pokaż akordy".
    -   Domyślnie widok jest w trybie "tylko tekst".
    -   Po aktywacji przełącznika, tekst piosenki jest natychmiastowo przeliczany i wyświetlany w formacie z akordami (ChordPro), analogicznie do widoku Organizatora.
    -   Mogę w dowolnym momencie wyłączyć widok akordów, wracając do trybu "tylko tekst".
    -   Stan przełącznika jest zapamiętywany tylko na czas trwania sesji na danej stronie (nie musi być trwały).

-   ID: US-027
-   Title: Szybki podgląd piosenki z listy
-   Description: Jako Organizator, przeglądając listę swoich piosenek, chcę mieć możliwość szybkiego otworzenia podglądu wybranego utworu w trybie "do grania", aby sprawdzić jego wygląd i przetestować transpozycję bez wchodzenia w tryb edycji lub Biesiada.
-   Acceptance Criteria:
    -   W widoku listy piosenek (`/management/songs`), w kolumnie "Akcje", obok istniejących ikon, widoczna jest nowa ikona "Podgląd" (np. ikona `visibility`).
    -   Kliknięcie ikony "Podgląd" przekierowuje użytkownika na nową, dedykowaną stronę podglądu piosenki (np. `/management/songs/{id}/preview`).
    -   Nowy widok jest chroniony i dostępny tylko dla zalogowanego organizatora.
    -   W widoku podglądu wyświetlana jest piosenka przy użyciu komponentu `SongViewerComponent`.
    -   Widoczny jest tytuł oraz pełna treść piosenki z akordami.
    -   Dostępne i w pełni funkcjonalne są kontrolki do transpozycji akordów.
    -   W nagłówku/toolbarze widoku znajduje się przycisk "Zamknij".
    -   Kliknięcie przycisku "Zamknij" powoduje powrót do widoku listy piosenek (`/management/songs`).

-   ID: US-028
-   Title: Podgląd piosenki w trybie 'Biesiada' podczas edycji
-   Description: Jako Organizator, podczas edycji piosenki, chcę mieć możliwość przełączenia podglądu, aby zobaczyć, jak piosenka będzie wyglądać w docelowym formacie "akordy nad tekstem", tak jak zobaczą ją Biesiadnicy.
-   Acceptance Criteria:
    -   W widoku edycji piosenki, nad panelem podglądu, znajduje się przełącznik z opcjami "Podgląd ChordPro" i "Podgląd Biesiada".
    -   Domyślnie wybrany jest tryb "Podgląd ChordPro", który działa tak jak dotychczas, pokazując na żywo wygenerowany format ChordPro.
    -   Po przełączeniu na "Podgląd Biesiada", panel podglądu renderuje piosenkę przy użyciu komponentu `SongViewerComponent`, wyświetlając ją w formacie "akordy nad tekstem".
    -   Dane wejściowe dla "Podglądu Biesiada" pochodzą z dynamicznie generowanego w tle formatu ChordPro.
    -   W "Podglądzie Biesiada" nie są widoczne kontrolki transpozycji.
    -   Wybór trybu podglądu jest zapamiętywany w `localStorage` i jest zachowywany pomiędzy sesjami edycji różnych piosenek.

-   ID: US-029
-   Title: Definiowanie powtórzeń w tekście piosenki
-   Description: Jako Organizator, podczas edycji piosenki, chcę móc w prosty sposób oznaczać powtarzające się linie tekstu lub sekwencje akordów, aby tworzyć bardziej zwięzłe i czytelne zapisy.
-   Acceptance Criteria:
    -   W edytorze piosenek, dodanie na końcu linii z akordami i/lub tekstem znacznika w formacie `xN` (gdzie N to liczba, np. `x2`, `x4`) jest interpretowane jako dyrektywa powtórzenia.
    -   W podglądzie "ChordPro", taka linia jest automatycznie konwertowana do standardowej dyrektywy ChordPro, np. `... {c: x2}`.
    -   W podglądzie "Biesiada" oraz w publicznym widoku piosenki, powtórzenie jest renderowane na końcu linii jako czytelny wskaźnik, np. `× 2`.
    -   Wskaźnik powtórzenia (`× 2`) jest wyświetlany czcionką o tym samym rozmiarze co tekst piosenki, ale w kolorze drugorzędnym z palety Angular Material (np. `secondary-text` lub `hint-text`), aby wizualnie odróżniał się od treści.
    -   Funkcjonalność działa zarówno dla linii zawierających tylko akordy (np. `C a d G x2`), jak i dla linii z tekstem i akordami (np. `Pieski małe dwa x2`).
    -   Podczas konwersji z formatu ChordPro do edytora, dyrektywa `{c: xN}` jest z powrotem zamieniana na prosty zapis `xN` na końcu linii.
    -   Niepoprawna składnia (np. brak liczby po `x`) jest traktowana jako zwykły tekst i nie jest konwertowana.

### 5.3. Zarządzanie Repertuarami
-   ID: US-008
-   Title: Tworzenie nowego repertuaru
-   Description: Jako Organizator, chcę móc stworzyć nowy repertuar, nadając mu nazwę opis.
-   Acceptance Criteria:
    -   Formularz tworzenia repertuaru w oknie modalnym pozwala na wpisanie unikalnej nazwy  oraz opisu.
    -   Po zapisaniu okienko dialogowe jest zamykane i aplikacja przechodzi do trybu edycji repertuaru.

-   ID: US-009
-   Title: Przeglądanie listy repertuarów
-   Description: Jako Organizator, chcę widzieć listę wszystkich moich repertuarów.
-   Acceptance Criteria:
    -   W panelu zarządzania widzę listę wszystkich stworzonych przeze mnie repertuarów.
    -   Dla każdego repertuaru widoczne są opcje edycji, usunięcia i udostępnienia.
    -   Jeśli nie mam żadnych repertuarów, widzę komunikat "pustego stanu".

-   ID: US-010
-   Title: Edycja repertuaru
-   Description: Jako Organizator, chcę móc edytować istniejący repertuar, zmieniając jego nazwę, dodając lub usuwając piosenki oraz zmieniając ich kolejność.
-   Acceptance Criteria:
    -   Mogę zmienić nazwę repertuaru.
    -   Mogę dodawać nowe piosenki z mojej biblioteki.
    -   Mogę usuwać piosenki z repertuaru (bez usuwania ich z głównej biblioteki).
    -   Mogę przesuwać piosenki w górę i w dół na liście za pomocą dedykowanych przycisków.

-   ID: US-011
-   Title: Usuwanie repertuaru
-   Description: Jako Organizator, chcę móc trwale usunąć cały repertuar.
-   Acceptance Criteria:
    -   Na liście repertuarów, przy każdym elemencie znajduje się opcja "Usuń".
    -   Po kliknięciu opcji "Usuń", system wyświetla okno modalne z prośbą o potwierdzenie akcji, wykorzystując do tego reużywalny komponent `ConfirmationDialogComponent`.
    -   Okno zawiera czytelne ostrzeżenie, np. "Czy na pewno chcesz usunąć repertuar '[Nazwa Repertuaru]'? Tej operacji nie można cofnąć."
    -   Po potwierdzeniu, repertuar zostaje trwale usunięty i znika z listy.
    -   Usunięcie repertuaru nie usuwa piosenek wchodzących w jego skład z głównej biblioteki piosenek.
    -   W trakcie operacji usuwania wyświetlany jest wskaźnik ładowania.

### 5.4. Udostępnianie i Tryb Biesiada
-   ID: US-012
-   Title: Generowanie linku i kodu QR
-   Description: Jako Organizator, chcę móc wygenerować stały link publiczny i kod QR dla każdej mojej piosenki i każdego repertuaru.
-   Acceptance Criteria:
    -   W widoku listy piosenek oraz listy repertuarów (w trybie zarządzania) znajduje się przycisk "Udostępnij".
    -   Po kliknięciu wyświetla się link publiczny oraz kod QR.
    -   Mogę łatwo skopiować link do schowka.

-   ID: US-013
-   Title: Dostęp Biesiadnika do piosenki
-   Description: Jako Biesiadnik, po zeskanowaniu kodu QR lub otwarciu linku do piosenki, chcę zobaczyć jej tekst na moim telefonie.
-   Acceptance Criteria:
    -   Strona domyślnie wyświetla tylko tekst piosenki, bez akordów.
    -   Czcionka jest duża i czytelna, a tekst dopasowany do szerokości ekranu mobilnego.
    -   Strona nie zawiera żadnych elementów nawigacyjnych poza tekstem piosenki i przełącznikiem widoczności akordów.

-   ID: US-014
-   Title: Dostęp Biesiadnika do repertuaru
-   Description: Jako Biesiadnik, po zeskanowaniu kodu QR lub otwarciu linku do repertuaru, chcę zobaczyć listę piosenek w tym repertuarze.
-   Acceptance Criteria:
    -   Wyświetla się strona z tytułem repertuaru i listą piosenek w ustalonej kolejności.
    -   Kliknięcie na tytuł piosenki przenosi mnie do jej widoku (zgodnie z US-013).
  
-   ID: US-015
-   Title: Ulepszona nawigacja Biesiadnika w repertuarze
-   Description: Jako Biesiadnik, przeglądając piosenkę w ramach repertuaru, chcę móc łatwo przejść do następnej lub poprzedniej piosenki, widząc ich tytuły na przyciskach nawigacyjnych.
-   Acceptance Criteria:
    -   W widoku piosenki dostępne są przyciski nawigacyjne do następnego i poprzedniego utworu.
    -   Przycisk nawigacji do poprzedniej piosenki jest oznaczony jej tytułem. Jest on niewidoczny dla pierwszej piosenki na liście.
    -   Przycisk nawigacji do następnej piosenki jest oznaczony jej tytułem. Jest on niewidoczny dla ostatniej piosenki na liście.
    -   Kliknięcie przenosi do widoku odpowiedniej piosenki bez powrotu do listy.

-   ID: US-016
-   Title: Tryb 'Biesiada' dla Organizatora
-   Description: Jako Organizator, chcę mieć dostęp do specjalnego trybu 'Biesiada' na moim telefonie, abym mógł prowadzić śpiewanie, widząc akordy.
-   Acceptance Criteria:
    -   Po zalogowaniu mogę przełączyć się na tryb 'Biesiada'.
    -   W tym trybie widzę listę moich repertuarów.
    -   Po wybraniu repertuaru widze liste piosenek przypidaną do repertuaru. W tym trybie mogę powrócić do listy repertuarów lub wybrać dowolną piosenkę.
    -  po wybraniu piosenki, widzę jej tekst wraz z akordami w uproszczonym widoku analogicznie jak anonimowy biesiadnik widzi publicznie udostepnioną piosenkę z tą różnicą, zę ja jako organizator widzę tekst piosenki wraz z akordami.
    -   Interfejs jest uproszczony i zoptymalizowany pod kątem odczytu, bez funkcji edycyjnych.

-   ID: US-017
-   Title: Wyświetlanie kodu QR przez Organizatora w trybie 'Biesiada'
-   Description: Jako Organizator w trybie 'Biesiada', chcę móc szybko wyświetlić duży kod QR dla aktualnego repertuaru, aby Biesiadnicy mogli go zeskanować.
-   Acceptance Criteria:
    -   W widoku repertuaru/piosenki w trybie 'Biesiada' jest przycisk "Pokaż kod QR".
    -   Po kliknięciu, na ekranie pojawia się duży, czytelny kod QR na białym tle, który łatwo zeskanować z odległości.

-   ID: US-031
-   Title: Szybkie wyjście z trybu Biesiada (Powrót do Dashboardu)
-   Description: Jako Organizator korzystający z trybu 'Biesiada', chcę mieć możliwość szybkiego zamknięcia tego trybu i powrotu do głównego panelu zarządzania jednym kliknięciem, bez konieczności wielokrotnego cofania się w historii przeglądarki.
-   Acceptance Criteria:
    -   Na ekranie głównym trybu Biesiada (Lista Repertuarów), w lewym górnym rogu znajduje się przycisk z ikoną "Zamknij" (`close`).
    -   Na ekranach podrzędnych (Lista Piosenek w Repertuarze, Widok Piosenki), przycisk z ikoną "Zamknij" znajduje się w prawym górnym rogu, aby nie kolidować z przyciskiem "Wstecz".
    -   Kliknięcie przycisku "Zamknij" powoduje natychmiastowe przekierowanie użytkownika do widoku Dashboardu (`/dashboard`).
    -   Przycisk jest widoczny tylko dla zalogowanego Organizatora (nie widzą go Biesiadnicy w widoku publicznym).

### 5.5. Interakcje w Widoku Piosenki
-   ID: US-025
-   Title: Transpozycja ad-hoc w widoku publicznym
-   Description: Jako Biesiadnik grający na instrumencie, chcę móc tymczasowo zmienić tonację wyświetlanej piosenki, aby dopasować ją do stroju mojego instrumentu lub możliwości wokalnych grupy.
-   Acceptance Criteria:
    -   W widoku publicznym piosenki, kontrolki transpozycji pojawiają się tylko wtedy, gdy włączony jest tryb "Pokaż akordy".
    -   Interfejs zawiera przyciski "-" i "+" oraz licznik przesunięcia (np. +2).
    -   Zmiana tonacji następuje natychmiastowo bez przeładowania strony.
    -   Wyłączenie widoku akordów ukrywa kontrolki transpozycji.

-   ID: US-026
-   Title: Transpozycja w trybie Organizatora (Biesiada)
-   Description: Jako Organizator prowadzący śpiewanie, chcę mieć szybki dostęp do zmiany tonacji, aby zareagować na potrzeby grupy w trakcie imprezy.
-   Acceptance Criteria:
    -   W trybie 'Biesiada' kontrolki transpozycji są widoczne na stałe w widoku piosenki.
    -   Transpozycja jest lokalna dla sesji przeglądarki i nie zmienia oryginalnego zapisu piosenki na serwerze.

-   ID: US-030
-   Title: Dostosowanie wielkości czcionki w widoku piosenki
-   Description: Jako Biesiadnik lub Organizator w trybie Biesiada, chcę móc powiększyć lub zmniejszyć tekst piosenki, aby dostosować go do moich potrzeb i warunków oświetleniowych.
-   Acceptance Criteria:
    -   W widoku piosenki (publicznym oraz Biesiada) widoczny jest zestaw trzech przycisków (`mat-button-toggle-group`) do zmiany wielkości czcionki.
    -   Przyciski są oznaczone literą "A" w wizualnie różniących się rozmiarach (małym, średnim, dużym).
    -   Domyślnie wybrana jest najmniejsza wielkość czcionki (`1rem`).
    -   Kliknięcie przycisku natychmiastowo zmienia rozmiar czcionki tekstu piosenki i akordów na jedną z predefiniowanych wartości: `1rem` (mały), `1.3rem` (średni), `1.6rem` (duży).
    -   Wybór jest zapamiętywany w `localStorage` i przywracany przy kolejnym otwarciu piosenki na tym samym urządzeniu.

### 5.6. Przypadki Brzegowe
-   ID: US-018
-   Title: Dostęp do usuniętej treści
-   Description: Jako Biesiadnik, próbując otworzyć link do piosenki lub repertuaru, który został usunięty przez Organizatora, chcę zobaczyć informację o tym, że treść jest niedostępna.
-   Acceptance Criteria:
    -   Zamiast standardowego błędu 404, wyświetlana jest dedykowana strona z komunikatem, np. "Ten materiał nie jest już dostępny".

-   ID: US-019
-   Title: Zabezpieczenie przed indeksowaniem
-   Description: Jako Organizator, chcę mieć pewność, że udostępniane przeze mnie teksty piosenek nie będą publicznie dostępne w wyszukiwarkach internetowych.
-   Acceptance Criteria:
    -   Wszystkie strony publiczne (z widokiem piosenki/repertuaru) zawierają w nagłówku HTML metatag `<meta name="robots" content="noindex, nofollow">`.

## 6. Success Metrics
Ponieważ jest to projekt o charakterze zaliczeniowym, formalne wskaźniki sukcesu (KPI), takie jak liczba użytkowników czy czas zaangażowania, nie będą mierzone. Jakościowym kryterium sukcesu produktu będzie pomyślna realizacja i demonstracja kluczowych ścieżek użytkownika. Produkt osiągnie sukces, jeśli umożliwi bezproblemowe wykonanie dwóch głównych scenariuszy:
1.  Organizator jest w stanie skutecznie przygotować repertuar: zalogować się, dodać piosenki, stworzyć z nich listę odtwarzania i wygenerować link do udostępnienia.
2.  Podczas symulowanego wydarzenia, Organizator jest w stanie udostępnić repertuar Biesiadnikom za pomocą kodu QR, a Biesiadnicy mogą bezproblemowo uzyskać dostęp do tekstów piosenek i nawigować między nimi na swoich urządzeniach mobilnych.
