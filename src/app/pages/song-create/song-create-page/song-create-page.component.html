<div class="song-create">
    <header class="song-create__header">
        <div class="song-create__header-title">
            <button mat-icon-button type="button" class="song-create__back" (click)="onCancel()" aria-label="Powrót do listy piosenek">
                <mat-icon>arrow_back</mat-icon>
            </button>
            <h1>Dodaj nową piosenkę</h1>
        </div>
        <div class="song-create__actions">
            <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="isSaving()">
                Anuluj
            </button>
            <button mat-flat-button color="primary" type="button" (click)="onSubmit()" [disabled]="!isFormValid() || isSaving()">
                Zapisz
            </button>
        </div>
    </header>

    @if (isSaving()) {
        <mat-progress-bar mode="indeterminate" class="song-create__progress"></mat-progress-bar>
    }

    @if (error() === 'save_failed') {
        <div class="song-create__error">
            Nie udało się zapisać piosenki. Spróbuj ponownie później.
        </div>
    }

    <stbo-song-edit-form
        class="song-create__form"
        [initialData]="null"
        [isSaving]="isSaving()"
        (saveSong)="onSaveSong($event)"
        (formValidityChange)="onFormValidityChange($event)"
    ></stbo-song-edit-form>
</div>
